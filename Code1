<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Registration Form</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="script.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-blue-950 flex items-center justify-center min-h-screen">
  <div class="bg-blue-900 p-8 rounded-2xl shadow-lg w-full max-w-2xl text-white">
    <h2 class="text-2xl font-bold mb-6 text-center text-orange-400">Smart Registration Form</h2>
    <form id="smartForm" class="space-y-4"></form>

    <button id="submitBtn" 
            class="w-full mt-4 bg-orange-500 text-white p-3 rounded-lg hover:bg-orange-600">
      Submit
    </button>

    <!-- Preview Section -->
    <div id="previewCard" class="hidden mt-6 p-6 border rounded-xl shadow bg-blue-800">
      <h3 class="text-lg font-bold mb-4 text-orange-400">Preview Your Details</h3>
      <div id="previewContent" class="space-y-2"></div>
      <button id="confirmBtn" 
              class="w-full mt-4 bg-green-600 text-white p-3 rounded-lg hover:bg-green-700">
        Confirm & Submit
      </button>
    </div>
  </div>
</body>
</html>




// ✅ Sample JSON
const formData = [
  { "title": "First Name", "id": "fname", "inputType": "text", "mandatory": true, "enable": true },
  { "title": "Last Name", "id": "lname", "inputType": "text", "mandatory": true, "enable": true },
  { "title": "Email", "id": "email", "inputType": "text", "mandatory": true, "enable": true },
  { "title": "Phone Number", "id": "phoneNum", "inputType": "number", "mandatory": true, "enable": true },
  { "title": "Gender", "id": "gender", "inputType": "select", "mandatory": true, "enable": true,
    "options": [
      { "text": "Male", "value": "male" },
      { "text": "Female", "value": "female" },
      { "text": "Other", "value": "other" }
    ]},
  { "title": "Address", "id": "address_1", "inputType": "textarea", "mandatory": true, "enable": true },
  { "title": "Receive Newsletter", "id": "newsletter", "inputType": "checkbox", "mandatory": false, "enable": true }
];

// ✅ Build form dynamically
function buildForm(data) {
  const form = $("#smartForm");
  form.empty();

  data.forEach(field => {
    let fieldHtml = "";
    switch (field.inputType) {
      case "text":
      case "number":
        fieldHtml = `
          <div>
            <label class="block font-semibold mb-1">${field.title} 
              ${field.mandatory ? '<span class="text-orange-400">*</span>' : ''}
            </label>
            <input type="${field.inputType}" id="${field.id}" 
                   class="w-full p-2 border rounded-lg text-black"
                   ${field.enable ? '' : 'disabled'}
                   ${field.mandatory ? 'required' : ''}>
          </div>`;
        break;

      case "textarea":
        fieldHtml = `
          <div>
            <label class="block font-semibold mb-1">${field.title} 
              ${field.mandatory ? '<span class="text-orange-400">*</span>' : ''}
            </label>
            <textarea id="${field.id}" 
                      class="w-full p-2 border rounded-lg text-black"
                      ${field.enable ? '' : 'disabled'}
                      ${field.mandatory ? 'required' : ''}></textarea>
          </div>`;
        break;

      case "select":
        let options = field.options.map(opt => `<option value="${opt.value}">${opt.text}</option>`).join("");
        fieldHtml = `
          <div>
            <label class="block font-semibold mb-1">${field.title} 
              ${field.mandatory ? '<span class="text-orange-400">*</span>' : ''}
            </label>
            <select id="${field.id}" 
                    class="w-full p-2 border rounded-lg text-black"
                    ${field.enable ? '' : 'disabled'}
                    ${field.mandatory ? 'required' : ''}>
              <option value="">-- Select --</option>
              ${options}
            </select>
          </div>`;
        break;

      case "checkbox":
        fieldHtml = `
          <div class="flex items-center">
            <input type="checkbox" id="${field.id}" class="mr-2">
            <label for="${field.id}">${field.title}</label>
          </div>`;
        break;
    }
    form.append(fieldHtml);
  });
}

// ✅ Validation function
function validateForm() {
  let valid = true;
  let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  let phoneRegex = /^[0-9]{10}$/;
  let nameRegex = /^[A-Za-z]{2,}$/;

  $("#smartForm [required]").each(function () {
    let value = $(this).val().trim();
    let id = $(this).attr("id");

    // Reset error styles
    $(this).removeClass("border-red-500");

    if (!value) {
      $(this).addClass("border-red-500");
      valid = false;
    } else {
      // Specific validations
      if ((id === "fname" || id === "lname") && !nameRegex.test(value)) {
        $(this).addClass("border-red-500");
        alert("⚠️ " + id + " must contain at least 2 alphabetic characters.");
        valid = false;
      }
      if (id === "email" && !emailRegex.test(value)) {
        $(this).addClass("border-red-500");
        alert("⚠️ Enter a valid email address.");
        valid = false;
      }
      if (id === "phoneNum" && !phoneRegex.test(value)) {
        $(this).addClass("border-red-500");
        alert("⚠️ Enter a valid 10-digit phone number.");
        valid = false;
      }
    }
  });

  return valid;
}

// ✅ Build form on page load
$(document).ready(function () {
  buildForm(formData);

  // Submit button
  $("#submitBtn").on("click", function (e) {
    e.preventDefault();

    if (validateForm()) {
      let previewHtml = "";
      formData.forEach(field => {
        let value = "";
        if (field.inputType === "checkbox") {
          value = $(`#${field.id}`).is(":checked") ? "Yes" : "No";
        } else {
          value = $(`#${field.id}`).val() || "-";
        }
        previewHtml += `<p><span class="font-semibold text-orange-400">${field.title}:</span> ${value}</p>`;
      });

      $("#previewContent").html(previewHtml);
      $("#previewCard").removeClass("hidden");
    } else {
      $("#previewCard").addClass("hidden");
    }
  });

  // Confirm button
  $("#confirmBtn").on("click", function (e) {
    e.preventDefault();
    alert("✅ Registration Completed Successfully!");
    $("#smartForm")[0].reset();
    $("#previewCard").addClass("hidden");
  });

  // Change event
  $("#smartForm").on("change", "select, input, textarea", function () {
    console.log(`Changed: ${this.id} -> ${$(this).val()}`);
  });

  // Mouse hover effect
  $("#submitBtn").on("mouseenter", function () {
    $(this).addClass("scale-105 transition-transform");
  }).on("mouseleave", function () {
    $(this).removeClass("scale-105");
  });
});
